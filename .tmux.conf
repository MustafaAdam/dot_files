# ==========================================
# Modern tmux.conf for Neovim + Guake (Guake-optimized)
# ==========================================

# -----------------------------
# Prefix key (like Ctrl+a instead of default Ctrl+b)
# -----------------------------
unbind C-b                     # Unbind default prefix
set-option -g prefix C-a       # Set Ctrl+a as new prefix
bind-key C-a send-prefix        # Let prefix key send itself when pressed twice

# -----------------------------
# Mouse support
# -----------------------------
set -g mouse on                # Enable mouse: click panes, resize, scroll

# -----------------------------
# Default shell
# -----------------------------
set-option -g default-shell /bin/zsh   # Start panes with zsh instead of bash

# -----------------------------
# Stop automatic window renaming
# -----------------------------
set-option -g allow-rename off        # Prevent tmux from renaming windows automatically based on running command

# ================================
# Status line and window appearance
# ================================
# Active window style
set -g window-status-current-style fg=colour196,bg=colour235,bold
# Inactive windows style
set -g window-status-style fg=colour244,bg=colour235

# ================================
# Pane borders
# ================================
set -g pane-border-style fg=colour235         # Inactive pane border color
set -g pane-active-border-style fg=colour46  # Active pane border color

# ================================
# Messages (command line prompts)
# ================================
set -g message-style fg=colour196,bg=colour235

# ================================
# Pane numbers (display-panes when pressing prefix+q)
# ================================
set -g display-panes-colour colour196         # Number color for inactive panes
set -g display-panes-active-colour colour46  # Number color for active pane

# ================================
# Clock color (prefix+t)
# ================================
set -g clock-mode-colour colour40

# ================================
# Pane resizing
# ================================
bind h resize-pane -L 5   # Resize current pane 5 cells left
bind j resize-pane -D 5   # Resize current pane 5 cells down
bind k resize-pane -U 5   # Resize current pane 5 cells up
bind l resize-pane -R 5   # Resize current pane 5 cells right

# ================================
# Pane switching (no prefix)
# ================================
# Alt + Arrow keys for pane switching (reliable in Guake)
bind -n M-Left  select-pane -L
bind -n M-Down  select-pane -D
bind -n M-Up    select-pane -U
bind -n M-Right select-pane -R

# Ctrl + h/j/k/l also works for pane switching
bind -n C-h select-pane -L
bind -n C-j select-pane -D
bind -n C-k select-pane -U
bind -n C-l select-pane -R

# ================================
# Easy split shortcuts
# ================================
bind -n M-v split-window -h   # Alt+v → vertical split (side by side)
bind -n M-h split-window -v   # Alt+h → horizontal split (top/bottom)

# ================================
# tmux plugin manager (TPM)
# ================================
set -g @plugin 'tmux-plugins/tpm'             # TPM itself
set -g @plugin 'tmux-plugins/tmux-sensible'  # Sensible defaults
set -g @plugin 'tmux-plugins/tmux-resurrect' # Save/restore sessions including Vim

# Save/restore Vim sessions automatically
set -g @resurrect-strategy-vim 'session'

# Initialize TPM (loads plugins)
run '~/.tmux/plugins/tpm/tpm'

# Automatically split new sessions vertically
set-hook -g session-created 'if "[ #{window_panes} -eq 1 ]" "split-window -h -d"'

